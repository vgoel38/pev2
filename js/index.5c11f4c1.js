(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={index:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c605")},"0624":function(e,t,n){"use strict";var o=n("416c"),a=n.n(o);a.a},1:function(e,t){},"1dfb":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".dropzone-over{-webkit-box-shadow:0 0 5px #51cbee;box-shadow:0 0 5px #51cbee;border:1px solid #51cbee}",""]),e.exports=t},2:function(e,t){},2883:function(e,t,n){var o=n("7617");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("5da5e98c",o,!0,{sourceMap:!1,shadowMode:!1})},"3caf":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}@keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}.plan-node{text-decoration:none;color:#4d525a;display:inline-block;-webkit-transition:all .1s;transition:all .1s;position:relative;font-size:12px;margin-bottom:4px;overflow-wrap:break-word;word-wrap:break-word;width:400px}.twod .plan-node{width:240px}.twod.plan-container.compact .plan-node{width:140px}.twod.plan-container.dot .plan-node{width:50px}.plan-node .plan-node-body{position:relative;border:1px solid #dedede;border-radius:3px;padding:6px 10px;background-color:#fff;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);cursor:auto}.plan-node.parallel .plan-node-body{-webkit-box-shadow:none;box-shadow:none}.plan-node header{margin-bottom:6px;overflow:hidden;cursor:pointer}.plan-node header:hover{background-color:#f7f7f7}.plan-node header h4{font-size:13px;float:left;font-weight:600;margin:0;line-height:inherit}.plan-node header .node-duration{float:right;margin-left:10px;font-size:13px}.plan-node .prop-list{color:inherit;table-layout:fixed}.plan-node:hover .plan-node-body,.plan-node:hover .workers>div{border-color:#00b5e2}.plan-node .node-description{text-align:left;font-style:italic;padding-top:10px;word-break:normal}.plan-node .node-description .node-type{font-weight:600;background-color:#00b5e2;color:#fff;padding:0 6px}.plan-node .btn-default{border:0}.plan-node .text-muted{color:#999ea7}.plan-node .plan-query-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:1;left:0}.plan-node .plan-query-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.plan-node .collapse-handle{cursor:pointer;position:absolute;z-index:1;bottom:0;right:0;display:none;background-color:hsla(0,0%,100%,.7)}.plan-node:hover .collapse-handle{display:block}.plan-node.never-executed .plan-node-body{background-image:linear-gradient(45deg,#f7f7f7 25%,transparent 0,transparent 50%,#f7f7f7 0,#f7f7f7 75%,transparent 0,transparent);background-size:1rem 1rem}.plan-node.highlight .plan-node-body{-webkit-animation:highlight 1s;animation:highlight 1s}.plan-node .workers{position:absolute;left:-1px;top:1px;width:100%;height:100%;cursor:pointer}.plan-node .workers>div{border:1px solid #dedede;border-radius:3px;background-color:#fff;width:100%;height:100%;position:absolute}.plan-node .workers-handle{cursor:pointer;position:absolute;top:0;right:-5px}.plan-node .workers-handle>div{position:absolute;top:0;background-color:#fff;border:1px solid #efefef;border-radius:3px}.plan-node .workers-handle>div:hover{background-color:#f7f7f7;border-color:#dedede}.node-bar-container{height:5px;margin-top:10px;margin-bottom:3px;border-radius:6px;background-color:#dedede;position:relative}.node-bar-container .node-bar{border-radius:6px;height:100%;text-align:left;position:absolute;left:0;top:0}.node-bar-label{text-align:left;display:block}.detailed{width:400px!important}ul.node-children.collapsed .plan-node,ul.node-children.collapsed .plan-node-body{width:50px!important}ul.node-children.collapsed .plan-node{display:block}ul.node-children.collapsed .plan-node .plan-node-body{height:0}ul.node-children.collapsed .plan-node .plan-node-body *{display:none}.classic .plan ul.node-children.collapsed li:before{top:7px}.classic .plan ul.node-children.collapsed li:last-child:after{height:14px}.hljs,.hljs-subst{color:#4d525a}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-doctag,.hljs-keyword,.hljs-link,.hljs-literal,.hljs-meta-keyword,.hljs-name,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#008caf;font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#279404;font-weight:600}.hljs-section,.hljs-title{color:#008caf;font-weight:700}.hljs-comment{color:#999ea7;font-style:italic}.hljs-meta{color:#999ea7}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:600}",""]),e.exports=t},"416c":function(e,t,n){var o=n("1dfb");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("b9a20a5e",o,!0,{sourceMap:!1,shadowMode:!1})},"44bc":function(e,t,n){"use strict";var o=n("2883"),a=n.n(o);a.a},"51dc":function(e,t,n){"use strict";var o=n("5681"),a=n.n(o);a.a},5681:function(e,t,n){var o=n("3caf");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=n("499e").default;a("7181d17e",o,!0,{sourceMap:!1,shadowMode:!1})},7617:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700|Source+Code+Pro:300,500&display=swap);"]),t.push([e.i,'.alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}@keyframes highlight{0%{background:#f7f7f7}20%{background:#ff9}to{background:#f7f7f7}}.plan-container{font-family:Noto Sans;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.plan-container .menu{position:absolute;z-index:1;right:0}.plan-container .menu-hidden h3,.plan-container .menu-hidden ul{display:none}.plan-container .grab-bing{cursor:-webkit-grab;cursor:-o-grab;cursor:grab}.plan-container .grab-bing:active{cursor:-webkit-grabbing;cursor:-o-grabbing;cursor:grabbing}.plan-container .text-muted{color:#ababab!important}.plan-container .cursor-help{cursor:help}.plan-container pre{overflow:initial}.plan-container code{font-weight:300;font-family:Source Code Pro}.plan-container .plan-query-text{background-color:#fff;font-family:Source Code Pro;text-align:left;margin-bottom:0}.plan-container .plan-query-text .code-key-item{background-color:#f8e400;font-weight:600;padding:1px}.plan ol,.plan ul{list-style:none}.twod .plan ol,.twod .plan ul{padding:0}.twod .plan ul.main-plan,.twod .plan ul.node-children{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;margin-right:auto;padding-top:12px;margin-top:-5px;text-align:center}.classic .plan ul:first-child{padding-left:0}.classic .plan ul:first-child>li:after,.classic .plan ul:first-child>li:before{display:none}.plan ul.node-children{position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children:before{content:"";position:absolute;top:0;left:50%;border-left:2px solid #c4c4c4;height:12px;width:0}.plan ul.node-children>li{list-style-type:none;position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children>li:not(:first-child){padding-left:10px}.twod .plan ul.node-children>li{padding-top:12px}.twod .plan ul.node-children>li:after,.twod .plan ul.node-children>li:before{content:"";position:absolute;top:0;right:50%;border-top:2px solid #c4c4c4;width:50%;height:12px}.twod .plan ul.node-children>li:after{right:auto;left:50%;border-left:2px solid #c4c4c4}.twod .plan ul.node-children>li:only-child{padding-top:0}.twod .plan ul.node-children>li:only-child:after,.twod .plan ul.node-children>li:only-child:before{display:none}.twod .plan ul.node-children>li:first-child:before,.twod .plan ul.node-children>li:last-child:after{border:0 none}.twod .plan ul.node-children>li:last-child:before{border-right:2px solid #c4c4c4;border-radius:0 6px 0 0}.twod .plan ul.node-children>li:first-child:after{border-radius:6px 0 0 0}.classic .plan ul.node-children>li:after,.classic .plan ul.node-children>li:before{content:"";position:absolute;left:-10px}.classic .plan ul.node-children>li:before{border-top:2px solid #c4c4c4;top:22px;width:11px;left:-10px}.classic .plan ul.node-children>li:after{border-left:2px solid #c4c4c4;height:calc(100% + 4px);width:6px;top:-5px}.classic .plan ul.node-children>li:last-child:after{height:29px;border-bottom:2px solid #c4c4c4;border-radius:0 0 0 6px}.classic .plan ul.node-children>li:last-child:before{left:-4px;width:5px}.plan ul.node-children>li .plan-node:hover+ul:before{border-color:#00b5e2}.plan ul.node-children>li .plan-node:hover+ul li:after,.plan ul.node-children>li .plan-node:hover+ul li:before,.plan ul.node-children>li .plan-node:hover+ul ul:before{border-color:#008caf}.plan ul.init-plans{padding-left:0;display:block}.twod .plan ul.init-plans{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twod .plan ul.init-plans>li{margin-left:3px;margin-right:3px;margin-bottom:10px}.plan .subplan{border:1px solid #dedede;border-radius:3px;background-color:#fcfcfc;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);padding:0 10px 6px 10px}.plan .subplan>h4{font-size:12px;margin-top:.5rem;font-weight:600;font-style:italic}.classic .plan .subplan{margin-bottom:3px;display:inline-block}.twod .plan .subplan{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.plan .subplan.highlight{-webkit-animation:highlight 1s;animation:highlight 1s}.plan .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan .accordion button .fa-chevron-right{display:inline-block}.plan .accordion button .fa-chevron-down{display:none}.plan .accordion button[aria-expanded=true] .fa-chevron-right{display:none!important}.plan .accordion button[aria-expanded=true] .fa-chevron-down{display:inline-block!important}.plan-stats{font-size:13px}.plan-stats .plan-triggers-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:6;right:0;width:300px}.plan-stats .plan-triggers-container .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan-stats .plan-triggers-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.tippy-popper .text-muted{color:inherit!important}.splitpanes__pane{-webkit-transition:none!important;transition:none!important}.plan-diagram{line-height:.85em;font-family:Noto Sans}.plan-diagram.plan-diagram-top{max-height:30%}.plan-diagram table tr td:nth-child(2){width:90%}.plan-diagram .legend ul li{font-size:13px}.plan-diagram .legend ul li span{display:inline-block;width:8px;height:8px;border-radius:50%}.plan-diagram table{cursor:pointer;border-collapse:collapse}.plan-diagram tbody{border-bottom:10px solid transparent}.plan-diagram td,.plan-diagram th{margin:0;color:#4d525a;white-space:nowrap}.plan-diagram td.node-type,.plan-diagram td.subplan,.plan-diagram th.node-type,.plan-diagram th.subplan{font-size:12px}.plan-diagram td.node-type,.plan-diagram th.node-type{text-transform:uppercase}.plan-diagram td.subplan,.plan-diagram th.subplan{font-style:italic}.plan-diagram th{font-size:13px}',""]),e.exports=t},c605:function(e,t,n){"use strict";n.r(t);var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column vh-100",attrs:{id:"app"}},[n("div",{staticClass:"navbar container"},[n("router-link",{staticClass:"btn btn-secondary ml-auto",attrs:{tag:"a",to:"/"}},[e._v(" New Plan ")]),n("router-link",{staticClass:"btn btn-link",attrs:{tag:"a",to:"about"}},[e._v(" About ")])],1),n("router-view")],1)},r=[],i=n("9ab4"),s=n("60a3");function l(e){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var v=["",""],m=function(e){function t(){return c(this,t),p(this,d(t).apply(this,arguments))}return f(t,e),t}(s["c"]);m=Object(i["a"])([s["a"]],m);var g=m,b=g,_=n("2877"),T=Object(_["a"])(b,a,r,!1,null,null,null),w=T.exports,y=n("8c4f"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col d-flex"},[e._m(1),n("div",{staticClass:"dropdown ml-auto"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" Sample Plans ")]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},e._l(e.samples,(function(t,o){return n("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.loadSample(t)}}},[e._v(" "+e._s(t[0])+" ")])})),0)])])]),n("form",{on:{submit:function(t){return t.preventDefault(),e.submitPlan(t)}}},[n("div",{staticClass:"form-group"},[e._m(2),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.planInput,expression:"planInput"}],class:["form-control",e.draggingPlan?"dropzone-over":""],attrs:{id:"planInput",rows:"8",placeholder:"Paste execution plan\\nOr drop a file"},domProps:{value:e.planInput},on:{dragenter:function(t){e.draggingPlan=!0},dragleave:function(t){e.draggingPlan=!1},drop:function(t){return t.preventDefault(),e.handleDrop(t)},input:function(t){t.target.composing||(e.planInput=t.target.value)}}})]),n("div",{staticClass:"form-group"},[e._m(3),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.queryInput,expression:"queryInput"}],class:["form-control",e.draggingQuery?"dropzone-over":""],attrs:{id:"queryInput",rows:"8",placeholder:"Paste corresponding SQL query\\nOr drop a file"},domProps:{value:e.queryInput},on:{dragenter:function(t){e.draggingQuery=!0},dragleave:function(t){e.draggingQuery=!1},drop:function(t){return t.preventDefault(),e.handleDrop(t)},input:function(t){t.target.composing||(e.queryInput=t.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Submit")])])])},S=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert alert-warning"},[e._v(" This is the demo application for "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[e._v("PEV2")]),e._v(". It is serverless and doesn't store your plans. "),n("br"),e._v(" Please consider using "),n("a",{attrs:{href:"https://explain.dalibo.com"}},[e._v("explain.dalibo.com")]),e._v(" instead if you want to save or share your plans. ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-muted"},[e._v(" For best results, use "),n("code",[e._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),n("br"),n("em",[e._v("psql")]),e._v(" users can export the plan to a file using "),n("code",[e._v("psql -qAt -f explain.sql > analyze.json")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"planInput"}},[e._v("Plan "),n("span",{staticClass:"small text-muted"},[e._v("(text or JSON)")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"queryInput"}},[e._v("Query "),n("span",{staticClass:"small text-muted"},[e._v("(optional)")])])}],C=n("bc3a"),x=n.n(C);function E(e){return E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function L(e,t){return!t||"object"!==E(t)&&"function"!==typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function I(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){function t(){var e;return A(this,t),e=L(this,R(t).apply(this,arguments)),e.samples=[["Example 1 (JSON)","plan_1.json","plan_1.sql"],["Example 1 (plain text)","plan_1.txt","plan_1.sql"],["Example 2","plan_2.json","plan_2.sql"],["Example 3","plan_3.json","plan_3.sql"],["Example 4","plan_4.json"],["Example 5","plan_5.json","plan_5.sql"],["With subplan","plan_6.txt"],["With CTE","plan_7.txt"],["Very large plan","plan_8.json"],["With trigger","plan_trigger.json","plan_trigger.sql"],["With trigger (plain text)","plan_trigger.txt","plan_trigger_2.sql"],["Parallel (verbose)","plan_parallel.json"],["Parallel (4 workers)","plan_parallel2.txt","plan_parallel2.sql"]],e.planInput="",e.queryInput="",e.draggingPlan=!1,e.draggingQuery=!1,e}return I(t,e),k(t,[{key:"mounted",value:function(){var e=document.getElementsByTagName("textarea");Array.prototype.forEach.call(e,(function(e){e.placeholder=e.placeholder.replace(/\\n/g,"\n")}))}},{key:"submitPlan",value:function(){v[0]=this.planInput,v[1]=this.queryInput,un.push({path:"plan"})}},{key:"loadSample",value:function(e){var t=this;x.a.get("samples/"+e[1]).then((function(e){t.planInput=e.request.responseText})),e[2]?x.a.get("samples/"+e[2]).then((function(e){t.queryInput=e.request.responseText})):this.queryInput=""}},{key:"handleDrop",value:function(e){var t=e.srcElement;if(t instanceof HTMLTextAreaElement&&(this.draggingPlan=!1,this.draggingQuery=!1,e.dataTransfer)){var n=e.dataTransfer.files[0],o=new FileReader;o.onload=function(e){o.result instanceof ArrayBuffer||(t.value=o.result||"",t.dispatchEvent(new Event("input")))},o.readAsText(n)}}}]),t}(s["c"]);M=Object(i["a"])([s["a"]],M);var j=M,B=j,U=(n("0624"),Object(_["a"])(B,O,S,!1,null,null,null)),W=U.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.planSource?n("plan",{attrs:{"plan-source":e.planSource,"plan-query":e.planQuery}}):e._e()},K=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["plan-container d-flex flex-column overflow-hidden flex-grow-1 bg-light",e.viewOptions.viewMode,e.viewOptions.orientation]},[e.plan?n("div",{staticClass:"plan-stats d-flex border-bottom border-top form-inline"},[n("div",{staticClass:"d-inline-block px-2"},[e._v(" Execution time: "),e.plan.planStats.executionTime?[n("span",{staticClass:"stat-value",domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.executionTime))}})]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing execution time")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Planning time: "),e.plan.planStats.planningTime?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.planningTimeClass(e.plan.planStats.planningTime/e.plan.planStats.executionTime*100),domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.planningTime))}})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing planning time")}})])]],2),e.plan.planStats.jitTime?n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" JIT: "),n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.planningTimeClass(e.plan.planStats.jitTime/e.plan.planStats.executionTime*100),domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.jitTime))}})])]):e._e(),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Slowest: "),e.plan.planStats.maxDuration?[n("span",{staticClass:"stat-value",domProps:{innerHTML:e._s(e.$options.filters.duration(e.plan.planStats.maxDuration))}}),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){return t.preventDefault(),e.showSlowestNode(t)}}},[n("i",{staticClass:"fa fa-link text-muted"})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing slowest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Largest: "),e.plan.planStats.maxRows?[n("span",{staticClass:"stat-value"},[e._v(e._s(e._f("rows")(e.plan.planStats.maxRows))+" "),n("span",{staticClass:"text-muted"},[e._v("rows")])])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("no rows")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[e._v(" Costliest: "),e.plan.planStats.maxCost?[n("span",[e._v(e._s(e._f("cost")(e.plan.planStats.maxCost)))]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){return t.preventDefault(),e.showCostliestNode(t)}}},[n("i",{staticClass:"fa fa-link text-muted"})])]:[n("span",{staticClass:"text-muted"},[e._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:e.getHelpMessage("missing costliest")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2 position-relative"},[n("span",{staticClass:"stat-label"},[e._v("Triggers: ")]),e.plan.planStats.triggers.length?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+e.durationClass(e.totalTriggerDurationPercent),domProps:{innerHTML:e._s(e.$options.filters.duration(e.triggersTotalDuration))}})]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(t){t.preventDefault(),e.showTriggers=!e.showTriggers}}},[n("i",{staticClass:"fa fa-caret-down text-muted"})]),e.showTriggers?n("div",{staticClass:"plan-triggers-container text-left"},[n("button",{staticClass:"btn btn-close pull-right",on:{click:function(t){e.showTriggers=!1}}},[n("i",{staticClass:"fa fa-close"})]),n("h3",[e._v("Triggers")]),e._l(e.plan.planStats.triggers,(function(t,o){return n("div",[e._v(" "+e._s(t["Trigger Name"])+" "),n("br"),n("span",{staticClass:"text-muted"},[e._v("Called")]),e._v(" "+e._s(t["Calls"])),n("span",{staticClass:"text-muted"},[e._v("×")]),n("span",{staticClass:"float-right"},[n("span",{class:"p-0 px-1 alert "+e.durationClass(e.triggerDurationPercent(t)),domProps:{innerHTML:e._s(e.$options.filters.duration(t.Time))}}),e._v(" | "+e._s(e.triggerDurationPercent(t))),n("span",{staticClass:"text-muted"},[e._v("%")])]),n("br"),t.Relation?n("span",{staticClass:"text-muted"},[e._v("on")]):e._e(),e._v(" "+e._s(t.Relation)+" "),n("div",{staticClass:"clearfix"}),o!=e.plan.planStats.triggers.length-1?n("hr",{staticClass:"my-2"}):e._e()])}))],2):e._e()]:n("span",{staticClass:"text-muted"},[e._v(" N/A ")])],2),n("button",{class:["btn btn-sm ml-auto p-0 px-2",{"text-primary":e.showSource}],attrs:{title:"View source"},on:{click:e.showHideSource}},[n("i",{staticClass:"fa fa-code p-0"})]),n("button",{class:["border-left btn btn-sm p-0 px-2",{"text-primary":!e.viewOptions.menuHidden}],on:{click:e.showHideMenu}},[n("i",{staticClass:"fa fa-cog p-0"})])]):e._e(),!e.plan||e.viewOptions.menuHidden||e.showSource?e._e():n("div",{staticClass:"form-inline small border-bottom py-1"},[n("div",{staticClass:"btn-group btn-group-xs ml-auto mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.FULL},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.FULL}}},[e._v("full")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.COMPACT},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.COMPACT}}},[e._v("compact")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.viewMode==e.viewModes.DOT},on:{click:function(t){e.viewOptions.viewMode=e.viewModes.DOT}}},[e._v("dot")])]),n("div",{staticClass:"btn-group btn-group-xs mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.orientation==e.orientations.TWOD},on:{click:function(t){e.viewOptions.orientation=e.orientations.TWOD}}},[n("i",{staticClass:"fa fa-sitemap"}),e._v(" 2D ")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.orientation==e.orientations.CLASSIC},on:{click:function(t){e.viewOptions.orientation=e.orientations.CLASSIC}}},[n("i",{staticClass:"fa fa-list"}),e._v(" classic ")])]),n("div",{staticClass:"form-check mr-2 border-left pl-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.viewOptions.showDiagram,expression:"viewOptions.showDiagram"}],staticClass:"form-check-input",attrs:{id:"showDiagram",type:"checkbox"},domProps:{checked:Array.isArray(e.viewOptions.showDiagram)?e._i(e.viewOptions.showDiagram,null)>-1:e.viewOptions.showDiagram},on:{change:function(t){var n=e.viewOptions.showDiagram,o=t.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=e._i(n,r);o.checked?i<0&&e.$set(e.viewOptions,"showDiagram",n.concat([r])):i>-1&&e.$set(e.viewOptions,"showDiagram",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(e.viewOptions,"showDiagram",a)}}}),e._m(0)]),n("div",{staticClass:"form-group mr-2 pl-2 border-left"},[n("label",{staticClass:"mr-2 text-muted"},[e._v("Graph metric:")]),n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.NONE},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.NONE}}},[e._v("none")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.DURATION},attrs:{disabled:!e.rootNode[e.nodeProps.ACTUAL_DURATION]},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.DURATION}}},[e._v("duration")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.ROWS},attrs:{disabled:void 0===e.rootNode[e.nodeProps.ACTUAL_ROWS]},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.ROWS}}},[e._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.highlightType===e.highlightTypes.COST},on:{click:function(t){e.viewOptions.highlightType=e.highlightTypes.COST}}},[e._v("cost")])])])]),e.validationMessage?n("div",{staticClass:"h-100 w-100 d-flex justify-content-center"},[n("div",{staticClass:"alert alert-danger align-self-center"},[e._v(e._s(e.validationMessage))])]):e.showSource?n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("ul",{staticClass:"nav nav-pills p-2"},[n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"plan"==e.sourceTabActive}],attrs:{href:""},on:{click:function(t){t.preventDefault(),e.sourceTabActive="plan"}}},[e._v("Plan")])]),n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"query"==e.sourceTabActive}],attrs:{href:""},on:{click:function(t){t.preventDefault(),e.sourceTabActive="query"}}},[e._v("Query")])])]),n("div",{staticClass:"flex-grow-1 flex-shrink-1 bg-dark overflow-auto tab-content px-2"},[n("div",{class:["tab-pane fade show",{active:"plan"==e.sourceTabActive}]},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[e._v(e._s(e.planSource))])])]),n("div",{class:["tab-pane fade show",{active:"query"==e.sourceTabActive}]},[e.planQuery?n("div",{staticClass:"bg-dark"},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[e._v(e._s(e.planQuery))])])]):n("div",{staticClass:"text-white p-2"},[e._v(" No query provided for this plan ")])])])])]):n("div",{staticClass:"overflow-hidden flex-grow-1 flex-shrink-1 d-flex"},[n("splitpanes",{staticClass:"default-theme",on:{resize:function(t){e.viewOptions.diagramWidth=t[0].size}}},[e.viewOptions.showDiagram?n("pane",{ref:"diagram",staticClass:"plan-diagram overflow-auto h-100",attrs:{size:e.viewOptions.diagramWidth}},[n("diagram",{attrs:{plan:e.plan,showNode:e.showNode,showCTE:e.showCTE}})],1):e._e(),n("pane",{ref:"plan",staticClass:"overflow-auto flex-grow-1 flex-shrink-1 p-1",on:{mousedown:function(t){e.menuHidden=!0}}},[n("div",{staticClass:"plan h-100 w-100 d-flex flex-column grab-bing"},[n("ul",{staticClass:"main-plan"},[n("li",[n("plan-node",{ref:"root",attrs:{node:e.rootNode,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)]),n("ul",{staticClass:"init-plans"},e._l(e.plan.ctes,(function(t){return n("li",[n("plan-node",{ref:"root",refInFor:!0,attrs:{node:t,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)})),0)])])],1)],1)])},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"form-check-label",attrs:{for:"showDiagram"}},[n("i",{staticClass:"fa fa-align-left"}),e._v(" Diagram")])}],Y=n("2ef0"),q=n("512e"),J=(n("c1ea"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{subplan:e.node[e.nodeProps.SUBPLAN_NAME],"d-flex flex-column align-items-center":e.viewOptions.orientation==e.orientations.TWOD}},[e.node[e.nodeProps.SUBPLAN_NAME]?n("h4",[e._v(e._s(e.node[e.nodeProps.SUBPLAN_NAME]))]):e._e(),n("div",{class:["text-left plan-node",{detailed:e.showDetails,"never-executed":e.isNeverExecuted,parallel:e.workersCount}]},[e.workersCount?n("div",{staticClass:"workers text-muted py-0 px-1"},e._l(e.workersCountReversed,(function(e){return n("div",{style:"top: "+(1+2*e)+"px; left: "+(1+3*(e+1))+"px;"})})),0):e._e(),e.hasChildren?n("div",{staticClass:"collapse-handle"},[n("i",{class:["fa fa-fw",{"fa-compress":!e.collapsed,"fa-expand":e.collapsed}],attrs:{title:"Collpase or expand child nodes"},on:{click:function(t){return t.stopPropagation(),e.toggleCollapsed()}}})]):e._e(),n("div",{staticClass:"plan-node-body"},[n("header",{attrs:{title:"view node details"},on:{click:function(t){t.stopPropagation(),e.showDetails=!e.showDetails}}},[n("h4",[e._v(" "+e._s(e.getNodeName())+" ")]),e.viewOptions.viewMode===e.viewModes.FULL?n("span",[e.node[e.nodeProps.ACTUAL_DURATION]?n("span",{staticClass:"node-duration"},[n("span",{class:"p-0 px-1 rounded alert "+e.durationClass,domProps:{innerHTML:e._s(e.$options.filters.duration(e.node[e.nodeProps.ACTUAL_DURATION]))}}),e.executionTimePercent!==1/0?[e._v(" | "),n("strong",[e._v(e._s(e.executionTimePercent))]),n("span",{staticClass:"text-muted"},[e._v("%")])]:e._e()],2):e.isNeverExecuted?n("span",{staticClass:"node-duration text-warning"},[e._v(" Never executed ")]):e._e()]):e._e()]),e.viewOptions.viewMode===e.viewModes.FULL?n("div",{staticClass:"font-italic text-left"},[e.node[e.nodeProps.RELATION_NAME]?n("div",[n("span",{staticClass:"text-muted"},[e._v("on ")]),e.node[e.nodeProps.SCHEMA]?n("span",[e._v(e._s(e.node[e.nodeProps.SCHEMA])+".")]):e._e(),e._v(e._s(e.node[e.nodeProps.RELATION_NAME])+" "),e.node[e.nodeProps.ALIAS]?n("span",[e._v(" ("+e._s(e.node[e.nodeProps.ALIAS])+")")]):e._e()]):e._e(),e.node[e.nodeProps.GROUP_KEY]?n("div",[n("span",{staticClass:"text-muted"},[e._v("by")]),e._v(" "+e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.GROUP_KEY]),250,"…")))]):e._e(),e.node[e.nodeProps.SORT_KEY]?n("div",[n("span",{staticClass:"text-muted"},[e._v("by")]),e._v(" "+e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.SORT_KEY]),250,"…")))]):e._e(),e.node[e.nodeProps.JOIN_TYPE]?n("div",[e._v(e._s(e._f("truncate")(e._f("keysToString")(e.node[e.nodeProps.JOIN_TYPE]),250,"…"))+" "),n("span",{staticClass:"text-muted"},[e._v("join")])]):e._e(),e.node[e.nodeProps.INDEX_NAME]?n("div",[n("span",{staticClass:"text-muted"},[e._v(" using")]),e._v(" "+e._s(e._f("keysToString")(e.node[e.nodeProps.INDEX_NAME])))]):e._e(),e.node[e.nodeProps.HASH_CONDITION]?n("div",[n("span",{staticClass:"text-muted"},[e._v(" on")]),e._v(" "+e._s(e._f("keysToString")(e.node[e.nodeProps.HASH_CONDITION])))]):e._e(),e.node[e.nodeProps.CTE_NAME]?n("div",[n("a",{staticClass:"text-reset",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.showCTE("CTE "+e.node[e.nodeProps.CTE_NAME])}}},[n("i",{staticClass:"fa fa-link text-muted"}),e._v(" "),n("span",{staticClass:"text-muted"},[e._v("CTE")]),e._v(" "+e._s(e.node[e.nodeProps.CTE_NAME])+" ")])]):e._e()]):e._e(),e.allWorkersLaunched||e.viewOptions.viewMode!==e.viewModes.FULL?e._e():n("div",{staticClass:"text-c-3 cursor-help",attrs:{title:e.getHelpMessage("workers planned not launched")}},[n("i",{staticClass:"fa fa-exclamation-triangle"}),e._v(" "),n("span",[e._v("Not all workers launched")])]),e.lodash.isNumber(e.workersCount)&&!e.lodash.isNaN(e.workersCount)&&e.viewOptions.viewMode===e.viewModes.FULL?n("div",[n("span",[e._v("Workers: ")]),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.workersCount))])]):e._e(),n("div",{staticClass:"clearfix"}),e.viewOptions.highlightType!==e.highlightTypes.NONE&&null!==e.highlightValue?n("div",[n("div",{staticClass:"progress node-bar-container",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar",style:{width:e.barWidth+"%","background-color":e.getBarColor(e.barWidth)},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}})]),e.shouldShowNodeBarLabel()?n("span",{staticClass:"node-bar-label"},[n("span",{staticClass:"text-muted"},[e._v(e._s(e.viewOptions.highlightType)+":")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.highlightValue)}})]):e._e()]):e._e(),e.shouldShowCost?n("div",[n("span",[e._v(" Cost: "),n("span",{class:"p-0 px-1 alert "+e.costClass},[e._v(e._s(e._f("cost")(e.node[e.nodeProps.ACTUAL_COST])))]),e._v(" | "),n("span",[e._v(e._s(e.costPercent)),n("span",{staticClass:"text-muted"},[e._v("%")])])])]):e._e(),e.shouldShowRowsRemoved?n("div",[n("span",[n("b",[n("span",{class:"p-0 px-1 alert "+e.rowsRemovedClass},[e._v(e._s(100==e.rowsRemovedPercent?">99":e.rowsRemovedPercent)+"%")])]),e._v(" rows removed by filter "),n("span",{staticClass:"text-muted"},[e._v(" ("+e._s(e.tilde)+e._s(e._f("rows")(e.rowsRemoved+e.node[e.nodeProps.ACTUAL_ROWS]))+" scanned → "+e._s(e.tilde)+e._s(e._f("rows")(e.node[e.nodeProps.ACTUAL_ROWS]))+" returned) ")])])]):e._e(),e.shouldShowPlannerEstimate?n("div",[e.plannerRowEstimateDirection===e.estimateDirections.over?n("span",[e._m(0),e._v(" estimated rows")]):e._e(),e.plannerRowEstimateDirection===e.estimateDirections.under?n("span",[e._m(1),e._v(" estimated rows")]):e._e(),e.plannerRowEstimateValue!=1/0?n("span",[e._v(" by "),n("span",{class:"p-0 px-1 alert "+e.estimationClass},[n("strong",{domProps:{innerHTML:e._s(e.$options.filters.factor(e.plannerRowEstimateValue))}})])]):e._e()]):e._e(),e.showDetails?n("div",[e.getNodeTypeDescription()?n("div",{staticClass:"node-description"},[n("span",{staticClass:"node-type"},[e._v(e._s(e.node[e.nodeProps.NODE_TYPE])+" Node")]),e._v(" "),n("span",{domProps:{innerHTML:e._s(e.getNodeTypeDescription())}})]):e._e(),n("table",{staticClass:"table table-sm prop-list"},e._l(e.props,(function(t){return e.shouldShowProp(t.key,t.value)?n("tr",[n("td",{attrs:{width:"40%"}},[e._v(e._s(t.key))]),n("td",{domProps:{innerHTML:e._s(e.$options.filters.formatNodeProp(t.key,t.value,!0))}})]):e._e()})),0),e.workersCount?n("div",[e.lodash.isArray(e.node[e.nodeProps.WORKERS])?n("div",{staticClass:"accordion",attrs:{id:"accordion-"+e._uid}},[e._l(e.node[e.nodeProps.WORKERS],(function(t,o){return[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header p-0"},[n("button",{staticClass:"btn btn-link btn-sm text-secondary",staticStyle:{"font-size":"inherit"},attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse-"+e._uid+"-"+o}},[n("i",{staticClass:"fa fa-chevron-right fa-fw"}),n("i",{staticClass:"fa fa-chevron-down fa-fw"}),e._v(" Worker "+e._s(t[e.workerProps.WORKER_NUMBER])+" ")])]),n("div",{staticClass:"collapse",attrs:{id:"collapse-"+e._uid+"-"+o,"data-parent":"#accordion-"+e._uid}},[n("div",{staticClass:"card-body p-0"},[n("table",{staticClass:"table table-sm prop-list mb-0"},e._l(t,(function(t,o){return e.shouldShowProp(o,t)?n("tr",[n("td",{attrs:{width:"40%"}},[e._v(e._s(o))]),n("td",{domProps:{innerHTML:e._s(e.$options.filters.formatNodeProp(o,t,!0))}})]):e._e()})),0)])])])]}))],2):n("div",{staticClass:"font-italic"},[n("strong",[e._v("Workers")]),e._v(": Detailed information not available. Consider using "),n("code",[e._v("EXPLAIN VERBOSE")]),e._v(". ")])]):e._e(),e._m(2)]):e._e()])]),e.plans?n("ul",{class:["node-children",{collapsed:e.collapsed}]},e._l(e.plans,(function(t){return n("li",[n("plan-node",{attrs:{node:t,plan:e.plan,viewOptions:e.viewOptions,showCTE:e.showCTE}})],1)})),0):e._e()])}),z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("strong",[n("i",{staticClass:"fa fa-arrow-up"}),e._v(" over")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("strong",[n("i",{staticClass:"fa fa-arrow-down"}),e._v(" under")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-muted text-right"},[n("em",[e._v("* Calculated value")])])}];function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function X(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}var Q=function(){function e(){V(this,e)}return X(e,[{key:"getNodeTypeDescription",value:function(e){return Z[e.toUpperCase()]}},{key:"getHelpMessage",value:function(e){return ee[e.toUpperCase()]}}]),e}(),Z={LIMIT:"returns a specified number of rows from a record set.",SORT:"sorts a record set based on the specified sort key.","NESTED LOOP":"merges two record sets by looping through every record in the first set and\n   trying to find a match in the second set. All matching records are returned.","MERGE JOIN":"merges two record sets by first sorting them on a <strong>join key</strong>.",HASH:"generates a hash table from the records in the input recordset. Hash is used by\n   <strong>Hash Join</strong>.","HASH JOIN":"joins two record sets by hashing one of them (using a <strong>Hash Scan</strong>).",AGGREGATE:"groups records together based on a GROUP BY or aggregate function (like <code>sum()</code>).",HASHAGGREGATE:"groups records together based on a GROUP BY or aggregate function (like sum()). Hash Aggregate uses\n   a hash to first organize the records by a key.","SEQ SCAN":"finds relevant records by sequentially scanning the input record set. When reading from a table,\n   Seq Scans (unlike Index Scans) perform a single read operation (only the table is read).","INDEX SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Scans perform 2 read operations: one to\n    read the index and another to read the actual value from the table.","INDEX ONLY SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Only Scans perform a single read operation\n    from the index and do not read from the corresponding table.","BITMAP HEAP SCAN":"searches through the pages returned by the <strong>Bitmap Index Scan</strong>\n    for relevant rows.","BITMAP INDEX SCAN":"uses a <strong>Bitmap Index</strong> (index which uses 1 bit per page)\n    to find all relevant pages.\n    Results of this node are fed to the <strong>Bitmap Heap Scan</strong>.","CTE SCAN":"performs a sequential scan of <strong>Common Table Expression (CTE) query</strong> results. Note that\n    results of a CTE are materialized (calculated and temporarily stored)."},ee={"MISSING EXECUTION TIME":"Execution time (or Total runtime) not available for this plan. Make sure you\n    use EXPLAIN ANALYZE.","MISSING PLANNING TIME":"Planning time not available for this plan.","MISSING SLOWEST":"Could not compute durations. Make sure you use EXPLAIN ANALYZE.","NO ROWS":"No rows returned","MISSING COSTLIEST":"No cost info available. Considering using COSTS ON.","WORKERS PLANNED NOT LAUNCHED":"Less workers than planned were launched.\nConsider modifying max_parallel_workers or max_parallel_workers_per_gather."};function te(e,t,n,o){var a=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=e.scrollLeft,s=r.left>=a.left&&r.left<=a.right&&r.right<=a.right,l=e.scrollTop,c=r.top>=a.top&&r.top<=a.bottom&&r.bottom<=a.bottom;!n&&s&&c?o():(i=r.left+e.scrollLeft-a.left-a.width/2+r.width/2,l=r.top+e.scrollTop-a.top-20,ae({element:e,to:{scrollTop:l,scrollLeft:i},duration:400,done:o}))}var ne,oe=function(e){var t=e.currentTime,n=e.start,o=e.change,a=e.duration,r=t;return r/=a/2,r<1?o/2*r*r+n:(r-=1,-o/2*(r*(r-2)-1)+n)};function ae(e){var t=e.duration,n=e.element,o=e.to,a=e.done,r=n.scrollTop,i=n.scrollLeft,s=o.scrollTop-r,l=o.scrollLeft-i,c=(new Date).getTime(),p=function e(){var p=(new Date).getTime(),u=p-c;n.scrollTop=oe({currentTime:u,start:r,change:s,duration:t}),n.scrollLeft=oe({currentTime:u,start:i,change:l,duration:t}),u<t?requestAnimationFrame(e):(n.scrollTop=o.scrollTop,n.scrollLeft=o.scrollLeft,a&&a())};p()}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}(function(e){e[e["scrollTop"]=0]="scrollTop",e[e["scrollLeft"]=1]="scrollLeft"})(ne||(ne={})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var le,ce,pe,ue,de=function(){function e(){re(this,e)}return se(e,[{key:"hslToRgb",value:function(e,t,n){var o,a,r;if(0===t)o=a=r=n;else{var i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;o=this.hue2rgb(s,i,e+1/3),a=this.hue2rgb(s,i,e),r=this.hue2rgb(s,i,e-1/3)}return[Math.floor(255*o),Math.floor(255*a),Math.floor(255*r)]}},{key:"numberToColorHsl",value:function(e){var t=1.2*(100-e)/360,n=this.hslToRgb(t,.9,.4);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}},{key:"durationPercentToClass",value:function(e){return e>90?4:e>40?3:e>10?2:1}},{key:"hue2rgb",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}}]),e}(),fe=n("c1df"),he=n.n(fe),ve=n("4623"),me=n.n(ve);function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e){e[e["time"]=0]="time",e[e["rows"]=1]="rows",e[e["cost"]=2]="cost",e[e["buffers"]=3]="buffers",e[e["estimate_factor"]=4]="estimate_factor"})(le||(le={})),function(e){e[e["shared"]=0]="shared",e[e["temp"]=1]="temp",e[e["local"]=2]="local"}(ce||(ce={})),function(e){e["shared"]="Shared",e["temp"]="Temp",e["local"]="Local"}(pe||(pe={})),function(e){e["hit"]="Hit",e["read"]="Read",e["written"]="Written",e["dirtied"]="Dirtied"}(ue||(ue={}));var be,_e=function e(){ge(this,e)};_e.NONE="none",_e.DURATION="duration",_e.ROWS="rows",_e.COST="cost",function(e){e[e["over"]=1]="over",e[e["under"]=2]="under",e[e["none"]=3]="none"}(be||(be={}));var Te=function e(){ge(this,e)};Te.FULL="full",Te.COMPACT="compact",Te.DOT="dot";var we=function e(){ge(this,e)};we.TWOD="twod",we.CLASSIC="classic";var ye,Oe=function e(){ge(this,e)};Oe.NODE_TYPE="Node Type",Oe.ACTUAL_ROWS="Actual Rows",Oe.PLAN_ROWS="Plan Rows",Oe.ROWS_REMOVED_BY_FILTER="Rows Removed by Filter",Oe.ROWS_REMOVED_BY_JOIN_FILTER="Rows Removed by Join Filter",Oe.ACTUAL_STARTUP_TIME="Actual Startup Time",Oe.ACTUAL_TOTAL_TIME="Actual Total Time",Oe.ACTUAL_LOOPS="Actual Loops",Oe.STARTUP_COST="Startup Cost",Oe.TOTAL_COST="Total Cost",Oe.PLANS="Plans",Oe.RELATION_NAME="Relation Name",Oe.SCHEMA="Schema",Oe.ALIAS="Alias",Oe.GROUP_KEY="Group Key",Oe.SORT_KEY="Sort Key",Oe.SORT_METHOD="Sort Method",Oe.SORT_SPACE_TYPE="Sort Space Type",Oe.SORT_SPACE_USED="Sort Space Used",Oe.JOIN_TYPE="Join Type",Oe.INDEX_NAME="Index Name",Oe.HASH_CONDITION="Hash Cond",Oe.PARENT_RELATIONSHIP="Parent Relationship",Oe.SUBPLAN_NAME="Subplan Name",Oe.PARALLEL_AWARE="Parallel Aware",Oe.WORKERS="Workers",Oe.WORKERS_PLANNED="Workers Planned",Oe.WORKERS_LAUNCHED="Workers Launched",Oe.SHARED_HIT_BLOCKS="Shared Hit Blocks",Oe.SHARED_READ_BLOCKS="Shared Read Blocks",Oe.SHARED_DIRTIED_BLOCKS="Shared Dirtied Blocks",Oe.SHARED_WRITTEN_BLOCKS="Shared Written Blocks",Oe.TEMP_HIT_BLOCKS="Temp Hit Blocks",Oe.TEMP_READ_BLOCKS="Temp Read Blocks",Oe.TEMP_DIRTIED_BLOCKS="Temp Dirtied Blocks",Oe.TEMP_WRITTEN_BLOCKS="Temp Written Blocks",Oe.LOCAL_HIT_BLOCKS="Local Hit Blocks",Oe.LOCAL_READ_BLOCKS="Local Read Blocks",Oe.LOCAL_DIRTIED_BLOCKS="Local Dirtied Blocks",Oe.LOCAL_WRITTEN_BLOCKS="Local Written Blocks",Oe.IO_READ_TIME="I/O Read Time",Oe.IO_WRITE_TIME="I/O Write Time",Oe.COSTLIEST_NODE="*Costiest Node (by cost)",Oe.LARGEST_NODE="*Largest Node (by rows)",Oe.SLOWEST_NODE="*Slowest Node (by duration)",Oe.ACTUAL_DURATION="*Actual Duration",Oe.ACTUAL_COST="*Actual Cost",Oe.PLANNER_ESTIMATE_FACTOR="*Planner Row Estimate Factor",Oe.PLANNER_ESTIMATE_DIRECTION="*Planner Row Estimate Direction",Oe.CTE_SCAN="CTE Scan",Oe.CTE_NAME="CTE Name",Oe.FUNCTION_NAME="Function Name",Oe.ARRAY_INDEX_KEY="arrayIndex",Oe.PEV_PLAN_TAG="plan_",function(e){e[e["duration"]=0]="duration",e[e["boolean"]=1]="boolean",e[e["rows"]=2]="rows",e[e["cost"]=3]="cost",e[e["factor"]=4]="factor",e[e["estimateDirection"]=5]="estimateDirection",e[e["json"]=6]="json",e[e["space"]=7]="space",e[e["increment"]=8]="increment"}(ye||(ye={}));var Se={};Se[Oe.ACTUAL_ROWS]=ye.rows,Se[Oe.PLAN_ROWS]=ye.rows,Se[Oe.ACTUAL_TOTAL_TIME]=ye.duration,Se[Oe.ACTUAL_STARTUP_TIME]=ye.duration,Se[Oe.STARTUP_COST]=ye.cost,Se[Oe.TOTAL_COST]=ye.cost,Se[Oe.PARALLEL_AWARE]=ye.boolean,Se[Oe.WORKERS]=ye.json,Se[Oe.SORT_SPACE_USED]=ye.space,Se[Oe.ROWS_REMOVED_BY_FILTER]=ye.rows,Se[Oe.ROWS_REMOVED_BY_JOIN_FILTER]=ye.rows,Se[Oe.COSTLIEST_NODE]=ye.boolean,Se[Oe.LARGEST_NODE]=ye.boolean,Se[Oe.SLOWEST_NODE]=ye.boolean,Se[Oe.ACTUAL_DURATION]=ye.duration,Se[Oe.ACTUAL_COST]=ye.cost,Se[Oe.PLANNER_ESTIMATE_FACTOR]=ye.factor,Se[Oe.PLANNER_ESTIMATE_DIRECTION]=ye.estimateDirection,Se[Oe.IO_READ_TIME]=ye.duration,Se[Oe.IO_WRITE_TIME]=ye.duration;var Ce=function e(){ge(this,e)};function xe(e,t){if(t=!!t,e<1&&!t)return"<1 ms";if(e<1e3)return parseFloat(e.toPrecision(3)).toLocaleString()+"ms";var n=t?{}:{largest:2};return fe["duration"](e).format("w[w] d[d] h[h] m[m] s[s] SSS[ms]",n)}function Ee(e){return e=parseFloat(e.toPrecision(3)),e.toLocaleString()}function Ae(e){return e.toLocaleString()}function Pe(e){var t=parseFloat(e.toPrecision(2)).toLocaleString(),n=Y["template"]('${f}&nbsp;<span class="text-muted">&times;</span>');return n({f:t})}function ke(e){return e instanceof Array||(e=[e]),e=Y["map"](e,(function(e){return e.replace(/(^\(|\)$)/g,"")})),e.join(", ")}function Le(e,t,n){return n=n||"...",e.length>t?e.slice(0,t)+n:e}function Ne(e){return Re(1024*e)}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=1024,o=t<0?0:t,a=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n)),i=Y["template"]('${value}&nbsp;<span class="text-muted">${unit}</span>'),s=parseFloat((e/Math.pow(n,r)).toFixed(o)).toLocaleString();return i({value:s,unit:a[r]})}function Ie(e,t,n){if(Y["has"](Se,e)){if(Se[e]===ye.duration)return xe(t,n);if(Se[e]===ye.boolean)return t?"yes":"no";if(Se[e]===ye.cost)return Ee(t);if(Se[e]===ye.rows)return Ae(t);if(Se[e]===ye.factor)return Pe(t);if(Se[e]===ye.estimateDirection)switch(t){case be.over:return'<i class="fa fa-arrow-up"></i> over';case be.under:return'<i class="fa fa-arrow-down"></i> under';default:return"-"}else{if(Se[e]===ye.json)return JSON.stringify(t,null,2);if(Se[e]===ye.space)return Ne(t)}}return t}function De(e){var t;return t=e>90?4:e>40?3:e>10?2:1,t?"c-"+t:""}function Me(e){return Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function je(e){return We(e)||Ue(e)||Be()}function Be(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ue(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function We(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $e(e,t,n){return t&&Ke(e.prototype,t),n&&Ke(e,n),e}function Fe(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?Ye(e):t}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}function Je(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ze(e,t)}Ce.WORKER_NUMBER="Worker Number",Se[Ce.WORKER_NUMBER]=ye.increment,me()(fe);var Ve=function(e){function t(){var e;return He(this,t),e=Fe(this,qe(t).apply(this,arguments)),e.executionTimePercent=NaN,e.showDetails=!1,e.collapsed=!1,e.costPercent=NaN,e.barWidth=0,e.props=[],e.plans=[],e.rowsRemoved=NaN,e.rowsRemovedPercent=NaN,e.estimateDirections=be,e.highlightTypes=_e,e.viewModes=Te,e.orientations=we,e.nodeProps=Oe,e.workerProps=Ce,e.helpService=new Q,e.colorService=new de,e.lodash=Y,e}return Je(t,e),$e(t,[{key:"created",value:function(){this.calculateProps(),this.calculateBar(),this.calculateDuration(),this.calculateCost(),this.calculateRowsRemoved(),this.plans=this.node[Oe.PLANS],this.plannerRowEstimateDirection=this.node[Oe.PLANNER_ESTIMATE_DIRECTION],this.plannerRowEstimateValue=this.node[Oe.PLANNER_ESTIMATE_FACTOR],this.plan.nodeComponents.push(this)}},{key:"destroyed",value:function(){var e=this;Y["remove"](this.plan.nodeComponents,(function(t){return t===e}))}},{key:"calculateDuration",value:function(){var e=this.plan.planStats.executionTime||this.plan.content.Plan[Oe.ACTUAL_TOTAL_TIME];this.executionTimePercent=Y["round"](this.node[Oe.ACTUAL_DURATION]/e*100)}},{key:"calculateCost",value:function(){var e=this.plan.content.Plan[Oe.TOTAL_COST];this.costPercent=Y["round"](this.node[Oe.ACTUAL_COST]/e*100)}},{key:"calculateRowsRemoved",value:function(){var e=Y["find"](Y["keys"](this.node),(function(e){return e===Oe.ROWS_REMOVED_BY_FILTER||e===Oe.ROWS_REMOVED_BY_JOIN_FILTER}));if(e){var t=this.node[e];this.rowsRemoved=t;var n=this.node[Oe.ACTUAL_ROWS];this.rowsRemovedPercent=Y["floor"](t/(t+n)*100)}}},{key:"calculateProps",value:function(){this.props=Y["chain"](this.node).omit(Oe.PLANS).omit(Oe.WORKERS).map((function(e,t){return{key:t,value:e}})).value()}},{key:"getNodeTypeDescription",value:function(){return this.helpService.getNodeTypeDescription(this.node[Oe.NODE_TYPE])}},{key:"getNodeName",value:function(){var e=this.isParallelAware?"Parallel ":"";return e+=this.node[Oe.NODE_TYPE],this.viewOptions.viewMode!==Te.DOT||this.showDetails?e.toUpperCase():e.replace(/[^A-Z]/g,"").toUpperCase()}},{key:"shouldShowNodeBarLabel",value:function(){return!!this.showDetails||!this.collapsed&&this.viewOptions.viewMode!==Te.DOT}},{key:"calculateBar",value:function(){var e;if(this.$options&&this.$options.filters)switch(this.viewOptions.highlightType){case _e.DURATION:if(e=this.node[Oe.ACTUAL_DURATION],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxDuration*100),this.highlightValue=this.$options.filters.duration(e);break;case _e.ROWS:if(e=this.node[Oe.ACTUAL_ROWS],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxRows*100)||0,this.highlightValue=this.$options.filters.rows(e);break;case _e.COST:if(e=this.node[Oe.ACTUAL_COST],void 0===e){this.highlightValue=null;break}this.barWidth=Math.round(e/this.plan.planStats.maxCost*100),this.highlightValue=this.$options.filters.cost(e);break}}},{key:"getBarColor",value:function(e){return this.colorService.numberToColorHsl(e)}},{key:"toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"getHelpMessage",value:function(e){return this.helpService.getHelpMessage(e)}},{key:"shouldShowProp",value:function(e,t){return t||Se[e]===ye.increment||e===Oe.ACTUAL_ROWS}},{key:"shouldShowPlannerEstimate",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===Te.DOT)&&((this.estimationClass||this.showDetails)&&this.plannerRowEstimateDirection!==be.none&&this.plannerRowEstimateValue)}},{key:"shouldShowCost",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===Te.DOT)&&(this.node[Oe.ACTUAL_COST]&&(this.costClass||this.showDetails))}},{key:"shouldShowRowsRemoved",get:function(){return!!this.rowsRemovedClass&&this.viewOptions.viewMode===Te.FULL&&!this.collapsed}},{key:"durationClass",get:function(){var e,t=this.executionTimePercent;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"estimationClass",get:function(){var e,t=this.node[Oe.PLANNER_ESTIMATE_FACTOR];return t>1e3?e=4:t>100?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"costClass",get:function(){var e,t=this.costPercent;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"rowsRemovedClass",get:function(){var e,t=this.rowsRemovedPercent*this.executionTimePercent;return t>2e3?e=4:t>500&&(e=3),!!e&&"c-"+e}},{key:"hasChildren",get:function(){return!!this.plans}},{key:"workersCount",get:function(){return Y["isArray"](this.node[Oe.WORKERS])?this.node[Oe.WORKERS].length:parseInt(this.node[Oe.WORKERS],0)}},{key:"workersCountReversed",get:function(){return je(Array(this.workersCount).keys()).slice().reverse()}},{key:"isParallelAware",get:function(){return this.node[Oe.PARALLEL_AWARE]}},{key:"allWorkersLaunched",get:function(){return!this.node[Oe.WORKERS_LAUNCHED]||this.node[Oe.WORKERS_PLANNED]===this.node[Oe.WORKERS_LAUNCHED]}},{key:"isNeverExecuted",get:function(){return this.plan.planStats.executionTime&&!this.node[Oe.ACTUAL_LOOPS]}},{key:"hasSeveralLoops",get:function(){return this.node[Oe.ACTUAL_LOOPS]>1}},{key:"tilde",get:function(){return this.hasSeveralLoops?"~":""}}]),t}(s["c"]);Object(i["a"])([Object(s["b"])(Object)],Ve.prototype,"node",void 0),Object(i["a"])([Object(s["b"])(Object)],Ve.prototype,"plan",void 0),Object(i["a"])([Object(s["b"])(Object)],Ve.prototype,"viewOptions",void 0),Object(i["a"])([Object(s["b"])()],Ve.prototype,"showCTE",void 0),Object(i["a"])([Object(s["d"])("viewOptions.highlightType")],Ve.prototype,"calculateBar",null),Ve=Object(i["a"])([Object(s["a"])({name:"plan-node",filters:{cost:Ee,duration:xe,factor:Pe,formatNodeProp:Ie,keysToString:ke,truncate:Le,rows:Ae}})],Ve);var Ge=Ve,Xe=Ge,Qe=(n("51dc"),Object(_["a"])(Xe,J,z,!1,null,null,null)),Ze=Qe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.time},on:{click:function(t){e.viewOptions.metric=e.metrics.time}}},[e._v("time")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.rows},on:{click:function(t){e.viewOptions.metric=e.metrics.rows}}},[e._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.estimate_factor},on:{click:function(t){e.viewOptions.metric=e.metrics.estimate_factor}}},[e._v("estimation")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.cost},on:{click:function(t){e.viewOptions.metric=e.metrics.cost}}},[e._v("cost")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.metric===e.metrics.buffers},on:{click:function(t){e.viewOptions.metric=e.metrics.buffers}}},[e._v("buffers")])])]),e.viewOptions.metric==e.metrics.buffers?n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.shared},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.shared}}},[e._v("shared")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.temp},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.temp}}},[e._v("temp")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:e.viewOptions.buffersMetric===e.buffersMetrics.local},on:{click:function(t){e.viewOptions.buffersMetric=e.buffersMetrics.local}}},[e._v("local")])])]):e._e(),n("div",{staticClass:"legend text-center"},[e.viewOptions.metric==e.metrics.buffers?n("ul",{staticClass:"list-unstyled list-inline mb-0"},[e._m(0),e._m(1),e._m(2),e._m(3)]):e._e()]),n("table",{staticClass:"my-1 table-hover"},e._l(e.plans,(function(t,o){return n("tbody",[0===o&&e.plans.length>1?n("tr",[n("th",{staticClass:"subplan",attrs:{colspan:"2"}},[e._v(" Main Query Plan ")])]):e._e(),e._l(t,(function(t,o){return[t[1][e.nodeProps.SUBPLAN_NAME]?n("tr",[n("td",{staticClass:"subplan pr-2",class:{"font-weight-bold":e.lodash.startsWith(t[1][e.nodeProps.SUBPLAN_NAME],"CTE")},attrs:{colspan:"2"},on:{click:function(n){return n.preventDefault(),e.showCTE(t[1][e.nodeProps.SUBPLAN_NAME])}}},[e._l(e.lodash.range(t[0]),(function(n){return[-1!=e.lodash.indexOf(t[3],n)?[e._v("│")]:0!==n?[e._v("⠀")]:e._e()]})),0!==o?[e._v(e._s(t[2]?"└":"├"))]:e._e(),e._v(" "+e._s(t[1][e.nodeProps.SUBPLAN_NAME])+" ")],2)]):e._e(),n("tr",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"fade",delay:[200,0]},expression:"{arrow: true, animation: 'fade', delay: [200, 0]}"}],attrs:{content:e.tooltip(t[1])},on:{click:function(n){return n.preventDefault(),e.showNode(t[1],!1,!0)}}},[n("td",{staticClass:"node-type pr-2"},[e._l(e.lodash.range(t[0]),(function(n){return[-1!=e.lodash.indexOf(t[3],n)?[e._v("│")]:0!==n?[e._v("⠀")]:e._e()]})),0!==o?[t[1][e.nodeProps.SUBPLAN_NAME]?[t[2]?[e._v("⠀")]:[e._v("│")]]:[e._v(e._s(t[2]?"└":"├"))]]:e._e(),e._v(" "+e._s(e.nodeType(t))+" ")],2),n("td",[e.viewOptions.metric==e.metrics.time?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar border-left bg-secondary",style:"width: "+t[1][e.nodeProps.ACTUAL_DURATION]/(e.plan.planStats.executionTime||e.plan.content.Plan[e.nodeProps.ACTUAL_TOTAL_TIME])*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.rows?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.ACTUAL_ROWS]/e.plan.planStats.maxRows*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e(),e.viewOptions.metric==e.metrics.estimate_factor?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent justify-content-center",staticStyle:{height:"10px"}},[n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-down":t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.under}})]),n("div",{staticClass:"progress-bar",class:[t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.under?"bg-secondary":"bg-transparent"],style:"width: "+(t[1][e.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/e.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar border-left",staticStyle:{width:"1px",height:"5px"},attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar",class:[t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.over?"bg-secondary":"bg-transparent"],style:"width: "+(t[1][e.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/e.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-up":t[1][e.nodeProps.PLANNER_ESTIMATE_DIRECTION]===e.estimateDirections.over}})])]):e.viewOptions.metric==e.metrics.cost?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.ACTUAL_COST]/e.plan.planStats.maxCost*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.shared&&e.plan.planStats.maxSharedBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_HIT_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_READ_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_DIRTIED_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.SHARED_WRITTEN_BLOCKS]/e.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.temp&&e.plan.planStats.maxTempBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_HIT_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_READ_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_DIRTIED_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.TEMP_WRITTEN_BLOCKS]/e.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e.viewOptions.metric==e.metrics.buffers&&e.viewOptions.buffersMetric==e.buffersMetrics.local&&e.plan.planStats.maxLocalBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_HIT_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_READ_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_DIRTIED_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(t[1][e.nodeProps.LOCAL_WRITTEN_BLOCKS]/e.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()])])]}))],2)})),0)])},tt=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-hit rounded"}),e._v(" Hit ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-read"}),e._v(" Read ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-dirtied"}),e._v(" Dirtied ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-written"}),e._v(" Written ")])}];function nt(e){return nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rt(e,t,n){return t&&at(e.prototype,t),n&&at(e,n),e}function it(e,t){return!t||"object"!==nt(t)&&"function"!==typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ct(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}var ut=function(e){function t(){var e;return ot(this,t),e=it(this,lt(t).apply(this,arguments)),e.plans=[[]],e.lodash=Y,e.nodeProps=Oe,e.metrics=le,e.buffersMetrics=ce,e.estimateDirections=be,e.viewOptions={metric:le.time,buffersMetric:ce.shared},e}return ct(t,e),rt(t,[{key:"created",value:function(){var e=this,t=localStorage.getItem("diagramViewOptions");t&&Y["assignIn"](this.viewOptions,JSON.parse(t)),this.flatten(this.plans[0],0,this.plan.content.Plan,!0,[]),Y["each"](this.plan.ctes,(function(t){var n=[];e.flatten(n,0,t,!0,[]),e.plans.push(n)}))}},{key:"onViewOptionsChanged",value:function(e,t){localStorage.setItem("diagramViewOptions",JSON.stringify(this.viewOptions))}},{key:"tooltip",value:function(e){var t="";switch(this.viewOptions.metric){case le.time:t+=this.timeTooltip(e);break;case le.rows:t+=this.rowsTooltip(e);break;case le.estimate_factor:t+=this.estimateFactorTooltip(e);break;case le.cost:t+=this.costTooltip(e);break;case le.buffers:t+=this.buffersTooltip(e);break}return e[Oe.CTE_NAME]&&(t+="<br><em>CTE "+e[Oe.CTE_NAME]+"</em>"),t}},{key:"timeTooltip",value:function(e){return["Duration: ",xe(e[Oe.ACTUAL_DURATION],!0)].join("")}},{key:"rowsTooltip",value:function(e){return["Rows: ",Ae(e[Oe.ACTUAL_ROWS])].join("")}},{key:"estimateFactorTooltip",value:function(e){var t=e[Oe.PLANNER_ESTIMATE_FACTOR],n=e[Oe.PLANNER_ESTIMATE_DIRECTION],o="";switch(n){case be.over:o+='<i class="fa fa-arrow-up"></i> over';break;case be.under:o+='<i class="fa fa-arrow-down"></i> under';break;default:o+="Correctly"}return o+=" estimated",o+=t?" by <b>"+Pe(t)+"</b>":"",o}},{key:"costTooltip",value:function(e){return["Cost: ",Ae(e[Oe.ACTUAL_COST])].join("")}},{key:"buffersTooltip",value:function(e){var t,n,o,a,r="";switch(this.viewOptions.buffersMetric){case ce.shared:t=e[Oe.SHARED_HIT_BLOCKS],n=e[Oe.SHARED_READ_BLOCKS],a=e[Oe.SHARED_DIRTIED_BLOCKS],o=e[Oe.SHARED_WRITTEN_BLOCKS];break;case ce.temp:t=e[Oe.TEMP_HIT_BLOCKS],n=e[Oe.TEMP_READ_BLOCKS],a=e[Oe.TEMP_DIRTIED_BLOCKS],o=e[Oe.TEMP_WRITTEN_BLOCKS];break;case ce.local:t=e[Oe.LOCAL_HIT_BLOCKS],n=e[Oe.LOCAL_READ_BLOCKS],a=e[Oe.LOCAL_DIRTIED_BLOCKS],o=e[Oe.LOCAL_WRITTEN_BLOCKS];break}switch(r+=t?"<br>Hit: "+Ae(t):"",r+=n?"<br>Read: "+Ae(n):"",r+=a?"<br>Dirtied: "+Ae(a):"",r+=o?"<br>Written: "+Ae(o):"",r=r||" N/A",this.viewOptions.buffersMetric){case ce.shared:r="Shared Blocks:"+r;break;case ce.temp:r="Temp Blocks:"+r;break;case ce.local:r="Local Blocks:"+r;break}return r}},{key:"nodeType",value:function(e){return e[1][Oe.NODE_TYPE]}},{key:"flatten",value:function(e,t,n,o,a){var r=this;e.push([t,n,o,Y["concat"]([],a)]),o||a.push(t),Y["each"](n.Plans,(function(o){r.flatten(e,t+1,o,o===Y["last"](n.Plans),a)})),o||a.pop()}},{key:"maxEstimateFactor",get:function(){var e=Y["max"](Y["map"](this.plans,(function(e){return Y["max"](Y["map"](e,(function(e){return e[1][Oe.PLANNER_ESTIMATE_FACTOR]})))})));return 2*e||1}}]),t}(s["c"]);Object(i["a"])([Object(s["b"])()],ut.prototype,"plan",void 0),Object(i["a"])([Object(s["b"])()],ut.prototype,"showNode",void 0),Object(i["a"])([Object(s["b"])()],ut.prototype,"showCTE",void 0),Object(i["a"])([Object(s["d"])("viewOptions",{deep:!0})],ut.prototype,"onViewOptionsChanged",null),ut=Object(i["a"])([Object(s["a"])({filters:{durationClass:De}})],ut);var dt=ut,ft=dt,ht=Object(_["a"])(ft,et,tt,!1,null,null,null),vt=ht.exports;function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var gt=function e(t){mt(this,e),this[Oe.NODE_TYPE]=t;var n=/^((?:Parallel\s+)?(?:Seq\sScan|Tid\sScan|Bitmap\s+Heap\s+Scan|Foreign\s+Scan|Update|Insert|Delete))\son\s(\S+)(?:\s+(\S+))?$/.exec(t),o=/^(Bitmap\s+Index\s+Scan)\son\s(\S+)$/.exec(t),a=/^((?:Parallel\s+)?Index(?:\sOnly)?\sScan(?:\sBackward)?)\susing\s(\S+)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),r=/^(CTE\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),i=/^(Function\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(t),s=/^(Subquery\sScan)\son\s(.+)$/.exec(t);n?(this[Oe.NODE_TYPE]=n[1],this[Oe.RELATION_NAME]=n[2],n[3]&&(this[Oe.ALIAS]=n[3])):o?(this[Oe.NODE_TYPE]=o[1],this[Oe.INDEX_NAME]=o[2]):a?(this[Oe.NODE_TYPE]=a[1],this[Oe.INDEX_NAME]=a[2],this[Oe.RELATION_NAME]=a[3],a[4]&&(this[Oe.ALIAS]=a[4])):r?(this[Oe.NODE_TYPE]=r[1],this[Oe.CTE_NAME]=r[2],r[3]&&(this[Oe.ALIAS]=r[3])):i?(this[Oe.NODE_TYPE]=i[1],this[Oe.FUNCTION_NAME]=i[2],i[3]&&(this[Oe.ALIAS]=i[3])):s&&(this[Oe.NODE_TYPE]=s[1]);var l=/^(Parallel\s+)(.*)/.exec(this[Oe.NODE_TYPE]);l&&(this[Oe.NODE_TYPE]=l[2],this[Oe.PARALLEL_AWARE]=!0);var c=/(.*)\sJoin$/.exec(this[Oe.NODE_TYPE]),p=/(.*)\s+(Full|Left|Right|Anti)/.exec(this[Oe.NODE_TYPE]);c&&(this[Oe.NODE_TYPE]=c[1],p&&(this[Oe.NODE_TYPE]=p[1],this[Oe.JOIN_TYPE]=p[2]),this[Oe.NODE_TYPE]+=" Join")};function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _t=function e(t){bt(this,e),this[Ce.WORKER_NUMBER]=t},Tt=n("3c66"),wt=n.n(Tt);function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function St(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),e}var Ct=function(){function e(){yt(this,e)}return St(e,[{key:"createPlan",value:function(e,t,n){n=n.replace(/(\S)(?!$)(\s{2,})/gm,"$1 ");var o={id:Oe.PEV_PLAN_TAG+(new Date).getTime().toString(),name:e||"plan created on "+he()().format("LLL"),createdOn:new Date,content:t,query:n,planStats:{},nodeComponents:[],ctes:[]};return this.analyzePlan(o),o}},{key:"analyzePlan",value:function(e){this.processNode(e.content.Plan,e),this.calculateMaximums(e.content)}},{key:"isCTE",value:function(e){return"InitPlan"===e[Oe.PARENT_RELATIONSHIP]&&Y["startsWith"](e[Oe.SUBPLAN_NAME],"CTE")}},{key:"processNode",value:function(e,t){var n=this;this.calculatePlannerEstimate(e),Y["each"](e[Oe.PLANS],(function(o){var a;o[Oe.WORKERS]||(e[Oe.WORKERS_PLANNED]&&(a=e[Oe.WORKERS_LAUNCHED]||e[Oe.WORKERS_PLANNED]),o[Oe.WORKERS]=a||e[Oe.WORKERS]);n.isCTE(o)&&t.ctes.push(o),n.processNode(o,t)})),Y["remove"](e[Oe.PLANS],(function(e){return n.isCTE(e)})),this.calculateActuals(e)}},{key:"calculateMaximums",value:function(e){function t(e){return Y["map"](e,(function(e){return[e,t(e[Oe.PLANS])]}))}var n=Y["flattenDeep"](t([e.Plan])),o=Y["maxBy"](n,Oe.ACTUAL_ROWS);o&&(e.maxRows=o[Oe.ACTUAL_ROWS]);var a=Y["maxBy"](n,Oe.ACTUAL_COST);a&&(a[Oe.COSTLIEST_NODE]=!0,e.maxCost=a[Oe.ACTUAL_COST],e.costliest=a);var r=Y["maxBy"](n,Oe.ACTUAL_DURATION);function i(e){return e[Oe.SHARED_HIT_BLOCKS]+e[Oe.SHARED_READ_BLOCKS]+e[Oe.SHARED_DIRTIED_BLOCKS]+e[Oe.SHARED_WRITTEN_BLOCKS]}r&&(r[Oe.SLOWEST_NODE]=!0,e.maxDuration=r[Oe.ACTUAL_DURATION],e.slowest=r);var s=Y["maxBy"](n,(function(e){return i(e)}));function l(e){return e[Oe.TEMP_HIT_BLOCKS]+e[Oe.TEMP_READ_BLOCKS]+e[Oe.TEMP_DIRTIED_BLOCKS]+e[Oe.TEMP_WRITTEN_BLOCKS]}s&&(e.maxSharedBlocks=i(s));var c=Y["maxBy"](n,(function(e){return l(e)}));function p(e){return e[Oe.LOCAL_HIT_BLOCKS]+e[Oe.LOCAL_READ_BLOCKS]+e[Oe.LOCAL_DIRTIED_BLOCKS]+e[Oe.LOCAL_WRITTEN_BLOCKS]}c&&(e.maxTempBlocks=l(c));var u=Y["maxBy"](n,(function(e){return p(e)}));u&&(e.maxLocalBlocks=p(u))}},{key:"calculateActuals",value:function(e){if(!Y["isUndefined"](e[Oe.ACTUAL_TOTAL_TIME])){e[Oe.ACTUAL_DURATION]=e[Oe.ACTUAL_TOTAL_TIME],e[Oe.WORKERS]||(e[Oe.ACTUAL_DURATION]=e[Oe.ACTUAL_DURATION]*e[Oe.ACTUAL_LOOPS]);var t=e[Oe.ACTUAL_DURATION]-this.childrenDuration(e,0);e[Oe.ACTUAL_DURATION]=t>0?t:0}e[Oe.TOTAL_COST]&&(e[Oe.ACTUAL_COST]=e[Oe.TOTAL_COST]),Y["each"](e[Oe.PLANS],(function(t){"InitPlan"!==t[Oe.PARENT_RELATIONSHIP]&&t[Oe.TOTAL_COST]&&(e[Oe.ACTUAL_COST]=e[Oe.ACTUAL_COST]-t[Oe.TOTAL_COST])})),e[Oe.ACTUAL_COST]<0&&(e[Oe.ACTUAL_COST]=0)}},{key:"childrenDuration",value:function(e,t){var n=this;return Y["each"](e[Oe.PLANS],(function(e){"InitPlan"!==e[Oe.PARENT_RELATIONSHIP]&&(t+=e[Oe.ACTUAL_DURATION]||0,t=n.childrenDuration(e,t))})),t}},{key:"calculatePlannerEstimate",value:function(e){e[Oe.ACTUAL_ROWS]&&(e[Oe.PLANNER_ESTIMATE_FACTOR]=e[Oe.ACTUAL_ROWS]/e[Oe.PLAN_ROWS],e[Oe.PLANNER_ESTIMATE_DIRECTION]=be.none,e[Oe.PLANNER_ESTIMATE_FACTOR]>1&&(e[Oe.PLANNER_ESTIMATE_DIRECTION]=be.under),e[Oe.PLANNER_ESTIMATE_FACTOR]<1&&(e[Oe.PLANNER_ESTIMATE_DIRECTION]=be.over,e[Oe.PLANNER_ESTIMATE_FACTOR]=e[Oe.PLAN_ROWS]/e[Oe.ACTUAL_ROWS]))}},{key:"cleanupSource",value:function(e){return e=e.replace(/^(\||║|│)(.*)\1\r?\n/gm,"$2\n"),e=e.replace(/^\+-+\+\r?\n/gm,""),e=e.replace(/^(-|─|═)\1+\r?\n/gm,""),e=e.replace(/^(├|╟|╠|╞)(─|═)\2*(┤|╢|╣|╡)\r?\n/gm,""),e=e.replace(/^\+-+\+\r?\n/gm,""),e=e.replace(/^└(─)+┘\r?\n/gm,""),e=e.replace(/^╚(═)+╝\r?\n/gm,""),e=e.replace(/^┌(─)+┐\r?\n/gm,""),e=e.replace(/^╔(═)+╗\r?\n/gm,""),e=e.replace(/^(["'])(.*)\1\r?\n/gm,"$2\n"),e=e.replace(/\s*\+\r?\n/g,"\n"),e=e.replace(/↵\r?/gm,"\n"),e=e.replace(/^\s*QUERY PLAN\s*\r?\n/m,""),e=e.replace(/^\(\d+ rows?\)(\r?\n|$)/gm,"\n"),e}},{key:"fromSource",value:function(e){e=this.cleanupSource(e);var t=!1;try{t=JSON.parse(e)}catch(n){}return t?this.parseJson(e):/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)(\[|\{)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\n[\s\S]*?\1(\]|\})[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/gm.exec(e)?this.fromJson(e):this.fromText(e)}},{key:"fromJson",value:function(e){var t=e.split(/[\r\n]+/),n="",o=0;Y["each"](t,(function(e,t){var a=/^(\s*)(\[|\{)\s*$/.exec(e);if(a)return n=a[1],o=t,!1}));var a=0;Y["each"](t,(function(e,t){var o=new RegExp("^"+n+"(]|})s*$").exec(e);if(o)return a=t,!1}));var r=t.slice(o,a+1).join("\n");return this.parseJson(r)}},{key:"parseJson",value:function(e){var t=wt.a.parser(),n=[],o=null,a=null;return t.onvalue=function(e){var t=n[n.length-1];if(Y["isArray"](t))t.push(e);else{var o=Object.keys(t),a=o[o.length-1];t[a]=e}},t.onopenobject=function(e){var t={};t[e]=null,n.push(t)},t.onkey=function(e){var t=n[n.length-1],o=Object.keys(t);-1!==o.indexOf(e)?a=[n.length-1,t[e]]:t[e]=null},t.onopenarray=function(){n.push([])},t.oncloseobject=t.onclosearray=function(){var e=n.pop();if(n.length){var t=n[n.length-1];if(a&&a[0]===n.length-1)Y["merge"](a[1],e),a=null;else if(Y["isArray"](t))t.push(e);else{var r=Object.keys(t),i=r[r.length-1];t[i]=e}}else o=e},t.write(e).close(),o instanceof Array&&(o=o[0]),o}},{key:"fromText",value:function(e){var t=this,n=e.split(/\r?\n/),o={Plan:null},a=[];if(Y["each"](n,(function(e){e=e.replace(/"\s*$/,""),e=e.replace(/^\s*"/,""),e=e.replace(/\t/gm,"    ");var n="^s*$",r="^\\s*(QUERY|---|#).*$",i="^(\\s*->\\s*|\\s*)",s="([^\\r\\n\\t\\f\\v\\:\\(]*?)",l="\\(cost=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\s+rows=(\\d+)\\s+width=(\\d+)\\)",c="(?:",p=")",u="\\(",d="\\)",f="(?:actual\\stime=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\srows=(\\d+)\\sloops=(\\d+)|actual\\srows=(\\d+)\\sloops=(\\d+)|(never\\s+executed))",h="?",v=new RegExp(n).exec(e),m=new RegExp(r).exec(e),g=new RegExp(i+s+"\\s*"+c+(c+l)+"\\s+"+u+f+d+p+"|"+c+l+p+"|"+c+u+f+d+p+p+"*\\s*$","gm"),b=g.exec(e),_=/^(\s*)((?:Sub|Init)Plan)\s*(?:\d+\s*)?\s*(?:\(returns.*\)\s*)?$/gm,T=_.exec(e),w=/^(\s*)CTE\s+(\S+)\s*$/g,y=w.exec(e),O=/^(\s*)Trigger\s+(.*):\s+time=(\d+\.\d+)\s+calls=(\d+)\s*$/g,S=O.exec(e),C=new RegExp(/^(\s*)Worker\s+(\d+):\s+/.source+c+f+p+h+"(.*)\\s*$","g"),x=C.exec(e),E=/^(\s*)JIT:\s*$/g,A=E.exec(e),P=/^(\s*)(\S.*\S)\s*$/g,k=P.exec(e);if(!v&&!m)if(!b||y||T){if(T){var L=T[1],N=T[2];Y["remove"](a,(function(e){return e[0]>=L.length}));var R=Y["last"](a)[1],I={node:R.node,subelementType:N.toLowerCase(),name:T[0]},D=L.length;a.push([D,I])}else if(y){var M=y[1],j=y[2];Y["remove"](a,(function(e){return e[0]>=M.length}));var B=Y["last"](a)[1],U={node:B.node,subelementType:"initplan",name:"CTE "+j},W=M.length;a.push([W,U])}else if(x){x[1];var H=parseInt(x[2],0),K=Y["last"](a)[1];K.node[Oe.WORKERS]||(K.node[Oe.WORKERS]=[]);var $=t.getWorker(K.node,H);if($||($=new _t(H),K.node[Oe.WORKERS].push($)),x[3]&&x[4]&&($[Oe.ACTUAL_STARTUP_TIME]=parseFloat(x[3]),$[Oe.ACTUAL_TOTAL_TIME]=parseFloat(x[4]),$[Oe.ACTUAL_ROWS]=parseInt(x[5],0),$[Oe.ACTUAL_LOOPS]=parseInt(x[6],0)),t.parseSort(x[10],$))return;var F=x[10].split(/: (.+)/).filter((function(e){return e}));if(x[10]){if(!F[1])return;var q=Y["startCase"](F[0]);$[q]=F[1]}}else if(S){var J=S[1];Y["remove"](a,(function(e){return e[0]>=J.length})),o.Triggers=o.Triggers||[],o.Triggers.push({"Trigger Name":S[2],Time:t.parseTime(S[3]),Calls:S[4]})}else if(A){o.JIT={};var z={node:o.JIT};a.push([1,z])}else if(k){var V,G=k[1],X=k[2].split(/: (.+)/).filter((function(e){return e}));if(!X[1])return;if(Y["remove"](a,(function(e){return e[0]>=G.length})),V=0===a.length?o:Y["last"](a)[1].node,t.parseSort(k[2],V))return;if(t.parseBuffers(k[2],V))return;if(t.parseIOTimings(k[2],V))return;if(t.parseOptions(k[2],V))return;if(t.parseTiming(k[2],V))return;var Q=X[1].replace(/(\s*ms)$/,"");parseFloat(Q)&&(Q=parseFloat(Q));var Z=X[0];-1===Z.indexOf(" runtime")&&-1===Z.indexOf(" time")||(Z=Y["startCase"](Z)),V[Z]=Q}}else{var ee=b[1],te=b[13],ne=new gt(b[2]);(b[3]&&b[4]||b[14]&&b[15])&&(ne[Oe.STARTUP_COST]=parseFloat(b[3]||b[14]),ne[Oe.TOTAL_COST]=parseFloat(b[4]||b[15]),ne[Oe.PLAN_ROWS]=parseInt(b[5]||b[16],0)),(b[7]&&b[8]||b[18]&&b[19])&&(ne[Oe.ACTUAL_STARTUP_TIME]=parseFloat(b[7]||b[18]),ne[Oe.ACTUAL_TOTAL_TIME]=parseFloat(b[8]||b[19])),(b[9]&&b[10]||b[11]&&b[12]||b[20]&&b[21])&&(ne[Oe.ACTUAL_ROWS]=parseInt(b[9]||b[11]||b[20],0),ne[Oe.ACTUAL_LOOPS]=parseInt(b[10]||b[12]||b[21],0)),te&&(ne[Oe.ACTUAL_LOOPS]=0,ne[Oe.ACTUAL_ROWS]=0,ne[Oe.ACTUAL_TOTAL_TIME]=0);var oe={node:ne,subelementType:"subnode"},ae=ee.split("->")[0].length;if(0===a.length)return a.push([ae,oe]),void(o.Plan=ne);Y["remove"](a,(function(e){return e[0]>=ae}));var re=Y["last"](a)[1];a.push([ae,oe]),re.node[Oe.PLANS]||(re.node[Oe.PLANS]=[]),"initplan"===re.subelementType?(ne[Oe.PARENT_RELATIONSHIP]="InitPlan",ne[Oe.SUBPLAN_NAME]=re.name):"subplan"===re.subelementType&&(ne[Oe.PARENT_RELATIONSHIP]="SubPlan",ne[Oe.SUBPLAN_NAME]=re.name),re.node.Plans.push(ne)}})),!o.Plan)throw new Error("Unable to parse plan");return o}},{key:"parseSort",value:function(e,t){var n=/^(\s*)Sort Method:\s+(.*)\s+(Memory|Disk):\s+(?:(\S*)kB)\s*$/g,o=n.exec(e);return!!o&&(t[Oe.SORT_METHOD]=o[2].trim(),t[Oe.SORT_SPACE_USED]=o[4],t[Oe.SORT_SPACE_TYPE]=o[3],!0)}},{key:"parseBuffers",value:function(e,t){var n=this,o=/Buffers:\s+(.*)\s*$/g,a=o.exec(e);return!!a&&(Y["each"](a[1].split(/,\s+/),(function(e){var o=/(shared|temp|local)\s+(.*)$/g,a=o.exec(e);if(a){var r=a[1];Y["each"](["hit","read","written","dirtied"],(function(e){t[Y["map"]([r,e,"blocks"],Y["capitalize"]).join(" ")]=0})),Y["each"](a[2].split(/\s+/),(function(e){n.parseBuffer(e,r,t)}))}})),!0)}},{key:"parseBuffer",value:function(e,t,n){var o=e.split(/=/),a=o[0],r=parseInt(o[1],0);n[Y["map"]([t,a,"blocks"],Y["capitalize"]).join(" ")]=r}},{key:"getWorker",value:function(e,t){return Y["find"](e[Oe.WORKERS],(function(e){return e[Ce.WORKER_NUMBER]===t}))}},{key:"parseIOTimings",value:function(e,t){var n=/I\/O Timings:\s+(.*)\s*$/g,o=n.exec(e);return!!o&&(t[Oe.IO_READ_TIME]=0,t[Oe.IO_WRITE_TIME]=0,Y["each"](o[1].split(/\s+/),(function(e){var n=e.split(/=/),o=n[0],a=parseFloat(n[1]),r=["I/O",Y["capitalize"](o),"Time"].join(" ");t[r]=a})),!0)}},{key:"parseOptions",value:function(e,t){var n=/^(\s*)Options:\s+(.*)$/g,o=n.exec(e);if(o){t.Options={};var a,r=o[2].split(/\s*,\s*/);return Y["each"](r,(function(e){var n=/^(\S*)\s+(.*)$/g;a=n.exec(e),t.Options[a[1]]=JSON.parse(a[2])})),!0}return!1}},{key:"parseTiming",value:function(e,t){var n=this,o=/^(\s*)Timing:\s+(.*)$/g,a=o.exec(e);if(a){t.Timing={};var r,i=a[2].split(/\s*,\s*/);return Y["each"](i,(function(e){var o=/^(\S*)\s+(.*)$/g;r=o.exec(e),t.Timing[r[1]]=n.parseTime(r[2])})),!0}return!1}},{key:"parseTime",value:function(e){return parseFloat(e.replace(/(\s*ms)$/,""))}}]),e}();function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function At(e,t,n){return t&&Et(e.prototype,t),n&&Et(e,n),e}var Pt=function(){function e(t){var n=this;xt(this,e),this.element=t,this.listener=!0,this.start=!1,this.startMousePositionX=0,this.startMousePositionY=0,this.startScrollPositionX=0,this.startScrollPositionY=0,this.element.addEventListener("mousedown",(function(e){e.target.closest(".plan-node-body")||(e.preventDefault(),n.clearSelection(),n.startMousePositionX=e.screenX,n.startMousePositionY=e.screenY,n.startScrollPositionX=n.element.scrollLeft,n.startScrollPositionY=n.element.scrollTop,n.start=!0)})),document.documentElement.addEventListener("mouseup",(function(e){e.preventDefault(),n.startMousePositionX=0,n.startMousePositionY=0,n.startScrollPositionX=0,n.startScrollPositionY=0,n.start=!1})),this.element.addEventListener("mousemove",(function(e){n.listener&&n.start&&(e.preventDefault(),n.element.scrollTo(n.startScrollPositionX+(n.startMousePositionX-e.screenX),n.startScrollPositionY+(n.startMousePositionY-e.screenY)))}))}return At(e,[{key:"clearSelection",value:function(){if(window.getSelection){var e=window.getSelection();e&&e.removeAllRanges()}}}]),e}(),kt=n("6018");function Lt(e){return Lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function It(e,t,n){return t&&Rt(e.prototype,t),n&&Rt(e,n),e}function Dt(e,t){return!t||"object"!==Lt(t)&&"function"!==typeof t?Mt(e):t}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jt(e)}function Bt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}function Ut(e,t){return Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ut(e,t)}s["c"].use(kt["b"]),s["c"].component("tippy",kt["a"]);var Wt=function(e){function t(){var e;return Nt(this,t),e=Dt(this,jt(t).apply(this,arguments)),e.flat=[],e.menuHidden=!0,e.validationMessage="",e.showTriggers=!1,e.showSource=!1,e.sourceTabActive="plan",e.helpService=new Q,e.lodash=Y,e.viewOptions={menuHidden:!0,showHighlightBar:!1,showPlanStats:!0,highlightType:_e.NONE,viewMode:Te.FULL,orientation:we.TWOD,showDiagram:!0,diagramWidth:20},e.highlightTypes=_e,e.viewModes=Te,e.orientations=we,e.planService=new Ct,e.nodeProps=Oe,e}return Bt(t,e),It(t,[{key:"mounted",value:function(){this.handleScroll()}},{key:"handleScroll",value:function(){var e=this.$refs.plan.$el;new Pt(e)}},{key:"created",value:function(){var e,t=this,n=localStorage.getItem("viewOptions");n&&Y["assignIn"](this.viewOptions,JSON.parse(n));try{e=this.planService.fromSource(this.planSource),this.validationMessage=""}catch(a){return this.validationMessage="Couldn't parse plan",void(this.plan=null)}this.rootNode=e.Plan,this.plan=this.planService.createPlan("",e,this.planQuery);var o=this.plan.content;this.plan.planStats={executionTime:o["Execution Time"]||o["Total Runtime"]||null,planningTime:o["Planning Time"]||null,maxRows:o.maxRows||null,maxCost:o.maxCost||null,maxDuration:o.maxDuration||null,maxSharedBlocks:o.maxSharedBlocks||null,maxTempBlocks:o.maxTempBlocks||0,triggers:o.Triggers||[],jitTime:o.JIT&&o.JIT.Timing&&o.JIT.Timing.Total||null},s["c"].nextTick((function(){t.showNode(t.rootNode,!0,!1),t.plan}))}},{key:"onViewOptionsChanged",value:function(e,t){localStorage.setItem("viewOptions",JSON.stringify(this.viewOptions))}},{key:"onShowSource",value:function(e){e||s["c"].nextTick(this.handleScroll)}},{key:"showHideMenu",value:function(){this.viewOptions.menuHidden=!this.viewOptions.menuHidden}},{key:"showHideSource",value:function(){this.showSource=!this.showSource}},{key:"getHelpMessage",value:function(e){return this.helpService.getHelpMessage(e)}},{key:"showSlowestNode",value:function(){this.showNode(this.plan.content.slowest,!0,!0)}},{key:"showCostliestNode",value:function(){this.showNode(this.plan.content.costliest,!0,!0)}},{key:"showNode",value:function(e,t,n){var o=Y["find"](this.plan.nodeComponents,(function(t){return t.node===e}));o&&this.highlightEl(o.$el.querySelector(".plan-node"),t,n)}},{key:"highlightEl",value:function(e,t,n){if(e){var o=this.$refs.plan.$el;te(o,e,t,(function(){n&&(e.classList.add("highlight"),setTimeout((function(){e.classList.remove("highlight")}),1e3))}))}}},{key:"showCTE",value:function(e){var t=Y["find"](this.plan.nodeComponents,(function(t){return t.node[Oe.SUBPLAN_NAME]===e}));t&&this.highlightEl(t.$el,!1,!0)}},{key:"triggerDurationPercent",value:function(e){this.plan,this.plan&&this.plan.planStats;var t=this.plan&&this.plan.planStats.executionTime||0,n=e.Time;return Y["round"](n/t*100)}},{key:"toggleDiagram",value:function(){this.viewOptions.showDiagram=!this.viewOptions.showDiagram}},{key:"timelineTooltip",value:function(e){return this.plan?["Duration: ",xe(e.node[Oe.ACTUAL_DURATION],!0)," | ",e.executionTimePercent,"%"].join(""):""}},{key:"durationClass",value:function(e){var t;return t=e>90?4:e>40?3:e>10?2:1,!!t&&"c-"+t}},{key:"planningTimeClass",value:function(e){var t;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"totalTriggerDurationPercent",get:function(){this.plan,this.plan&&this.plan.planStats;var e=this.plan&&this.plan.planStats.executionTime||0,t=this.triggersTotalDuration||0;return Y["round"](t/e*100)}},{key:"triggersTotalDuration",get:function(){if(this.plan)return Y["sumBy"](this.plan.planStats.triggers,(function(e){return e.Time}))}}]),t}(s["c"]);Object(i["a"])([Object(s["b"])(String)],Wt.prototype,"planSource",void 0),Object(i["a"])([Object(s["b"])(String)],Wt.prototype,"planQuery",void 0),Object(i["a"])([Object(s["d"])("viewOptions",{deep:!0})],Wt.prototype,"onViewOptionsChanged",null),Object(i["a"])([Object(s["d"])("showSource")],Wt.prototype,"onShowSource",null),Wt=Object(i["a"])([Object(s["a"])({name:"plan",components:{PlanNode:Ze,Diagram:vt,Splitpanes:q["Splitpanes"],Pane:q["Pane"]},directives:{},filters:{cost:Ee,duration:xe,durationClass:De,rows:Ae}})],Wt);var Ht=Wt,Kt=Ht,$t=(n("44bc"),Object(_["a"])(Kt,$,F,!1,null,null,null)),Ft=$t.exports;function Yt(e){return Yt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function zt(e,t,n){return t&&Jt(e.prototype,t),n&&Jt(e,n),e}function Vt(e,t){return!t||"object"!==Yt(t)&&"function"!==typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}function Qt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}function Zt(e,t){return Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zt(e,t)}var en=function(e){function t(){var e;return qt(this,t),e=Vt(this,Xt(t).apply(this,arguments)),e.planSource=v[0],e.planQuery=v[1],e}return Qt(t,e),zt(t,[{key:"beforeMount",value:function(){this.planSource||un.push({name:"home"})}}]),t}(s["c"]);en=Object(i["a"])([Object(s["a"])({components:{Plan:Ft}})],en);var tn=en,nn=tn,on=Object(_["a"])(nn,H,K,!1,null,null,null),an=on.exports,rn=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},sn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h2",[e._v(" Disclaimer ")]),n("p",[e._v(" This project is a rewrite of the excellent "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev"}},[e._v("Postgres Explain Visualizer (pev)")]),e._v(". Kudos go to Alex Tatiyants. ")]),n("p",[e._v(" The pev project was initialy written in early 2016 but seem to be abandonned since then. There was no activity at all for more than "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues/42"}},[e._v("3 years and counting")]),e._v(" though there are "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues"}},[e._v("several issues open")]),e._v(" and relevant pull requests pending. ")]),n("p",[e._v(" The current project has several goals: "),n("ul",[n("li",[e._v(" isolate the plan view component and its dependencies in order to use it in any web app "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[e._v(" make it work with recent version of JS frameworks "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[e._v(" upgrade Bootstrap to a more recent version "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[e._v(" use VueJS just for a matter of taste "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[e._v(" add ability to parse text format "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[e._v(" add support for new features (parallelism, triggers, disk usage, …) ")]),n("li",[e._v(" maintain the project to match upgrades in PostgreSQL. ")])])]),n("h2",[e._v(" Usage tips ")]),n("p",[e._v(" To get the most out of it, we recommend generating a query plan using the following line: "),n("code",[e._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),e._v(". It is recommend submitting a (decently formatted) SQL query that generated the plan. ")]),n("p",[e._v(" PEV2 can also parse text although the JSON format usually has better support. ")]),n("h2",[e._v(" Help improve PEV2 ")]),n("p",[e._v(" You can help us. ")]),n("p",[e._v(" Report issues or contribute to the code on "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[e._v("Github")]),e._v(". ")]),n("hr"),n("div",{staticClass:"text-center text-muted"},[n("b",[e._v("pev2")]),e._v(" is brought to you by "),n("a",{attrs:{href:"https://dalibo.com"}},[e._v("Dalibo")])])])}],ln={},cn=Object(_["a"])(ln,rn,sn,!1,null,null,null),pn=cn.exports;o["a"].use(y["a"]);var un=new y["a"]({routes:[{path:"/",name:"home",component:W},{path:"/plan",name:"plan",component:an},{path:"/about",name:"about",component:pn}]});o["a"].config.productionTip=!1,new o["a"]({router:un,render:function(e){return e(w)}}).$mount("#app")}});
//# sourceMappingURL=index.5c11f4c1.js.map